# 03. 非功能需求 (Non-Functional Requirements)

## 0. 概述

本文件描述 VolleyBro 系統的非功能性需求。

---

## 1. 非功能性需求列表

### 1.0 效能 (Performance)

- **NFR-0.0.0 頁面載入時間**

  - 系統的所有頁面（如比賽記錄頁面、使用者管理頁面）載入時間不得超過 2 秒（假設正常網路條件為 10Mbps 連線速度）。
  - 使用 Lighthouse 工具進行性能測試，確保所有頁面達到 90 分以上的性能評分。

- **NFR-0.0.1 資料處理速度**

  - 比賽記錄中的逐球紀錄操作（包括得分、技術表現記錄）完成時間不得超過 1 秒。
  - 系統需即時更新比分和統計數據，延遲不得超過 500 毫秒。

- **NFR-0.0.2 並發用戶支援**

  - 系統需支援至少 100 個並發用戶同時操作，且響應時間保持在 2 秒內。
  - 例如：多個記錄者同時記錄不同比賽，或多個管理者同時管理球隊。

- **NFR-0.0.3 資料庫查詢效率**

  所有資料庫查詢（如載入比賽歷史記錄、球員統計數據）需在 500 毫秒內完成。

---

### 1.1 安全性 (Security)

- **NFR-1.0.0 身份驗證**

  - 使用 Auth.js 實現安全的身份驗證機制，支援電子郵件和 Google 帳號登入。
  - 所有密碼需使用 bcrypt 加密，salt rounds 至少為 12。

- **NFR-1.0.1 授權與權限控制**

  - 實施基於角色的權限控制（RBAC），確保用戶僅能訪問其角色允許的功能。
  - 例如：僅管理者與記錄者可創建和編輯比賽記錄，成員僅可查看。

- **NFR-1.0.2 資料加密**

  - 所有敏感資料（如用戶資訊、比賽數據）在資料庫中需加密儲存。
  - 傳輸中的資料需使用 HTTPS 協議保護（TLS 1.2 或以上）。

- **NFR-1.0.3 防止常見攻擊**

  - 系統需防止跨站腳本攻擊（XSS）、跨站請求偽造（CSRF）和 SQL 注入等常見攻擊。
  - 實施輸入驗證和輸出編碼機制。

- **NFR-1.0.4 敏感操作驗證**

  對敏感操作（如編輯比賽得分、刪除球隊）需進行二次驗證（如電子郵件驗證碼或 OTP）。

---

### 1.2 可用性 (Usability)

- **NFR-2.0.0 用戶介面設計**

  - 系統介面需直觀、易用，符合現代 Web 設計標準（如 Material Design 或類似規範）。
  - 提供清晰的導航和操作提示，例如在逐球紀錄時顯示當前局數和比分。

- **NFR-2.0.1 響應式設計**

  系統需支援響應式設計，適配不同設備（桌面、平板、手機），最小支援 320px 寬度的行動裝置。

- **NFR-2.0.2 無障礙訪問**

  - 系統需符合 WCAG 2.1 AA 級無障礙標準，確保視障和聽障用戶可使用。
  - 例如：支援鍵盤導航、螢幕閱讀器兼容性。

- **NFR-2.0.3 多語言支援**

  系統需支援多語言介面，至少包括繁體中文和英文，用戶可根據偏好切換語言。

---

### 1.3 可靠性 (Reliability)

- **NFR-3.0.0 系統可用性**

  系統的正常運行時間（uptime）需達到 99.9%，即每年停機時間不超過 8.76 小時。

- **NFR-3.0.1 故障恢復**

  - 系統需具備自動故障檢測和恢復機制，確保在發生故障時能快速切換至備援系統。
  - 恢復時間目標（RTO）不超過 1 小時，恢復點目標（RPO）不超過 5 分鐘。

- **NFR-3.0.2 資料完整性**

  - 系統需確保資料一致性和完整性，防止比賽記錄或球員統計數據丟失或損壞。
  - 實施每日自動資料備份，備份保留至少 7 天。

- **NFR-3.0.3 錯誤處理**

  - 系統需提供友好的錯誤訊息，幫助用戶理解問題並採取行動。
  - 例如：比賽創建失敗時顯示「請輸入有效的對手名稱」而非技術性錯誤代碼。

---

### 1.4 可擴展性 (Scalability)

- **NFR-4.0.0 水平擴展**

  - 系統架構需支援水平擴展，能通過增加伺服器節點應對用戶增長和流量高峰。
  - 例如：使用負載均衡器分配比賽記錄的並發請求。

- **NFR-4.0.1 資料庫擴展**

  資料庫需支援分片（sharding）或複製（replication），以處理大量比賽數據和並發查詢。

- **NFR-4.0.2 支援用戶增長**

  系統需能支援至少 10,000 個註冊用戶和 1,000 場比賽記錄，無需大幅修改架構。

---

### 1.5 維護性 (Maintainability)

- **NFR-5.0.0 程式碼品質**

  - 程式碼需遵循統一的編碼規範（如 Airbnb JavaScript Style Guide），並使用註釋和文件化工具。
  - 例如：使用 ESLint 檢查程式碼一致性。

- **NFR-5.0.1 模組化設計**

  - 系統需採用模組化設計，便於功能擴展和維護。
  - 例如：將比賽記錄、球隊管理和用戶管理分為獨立模組。

- **NFR-5.0.2 日誌記錄**

  - 系統需記錄關鍵操作（如比賽創建、逐球記錄）和錯誤日誌，便於故障排查和審計。
  - 日誌需儲存至少 30 天。

- **NFR-5.0.3 自動化測試**

  - 系統需具備自動化測試套件，覆蓋至少 80% 的核心功能（如逐球紀錄、球員替換）。
  - 例如：使用 Jest 進行單元測試，Cypress 進行端到端測試。

---

### 1.6 合規性 (Compliance)

- **NFR-6.0.0 隱私保護**

  - 系統需符合 GDPR 等隱私法規，確保用戶資料（如電子郵件、比賽統計）的合法收集、儲存和處理。
  - 提供用戶資料刪除和導出功能。

- **NFR-6.0.1 資料保留政策**

  - 比賽記錄資料保留 5 年，用戶資料在帳號刪除後 30 天內移除。

- **NFR-6.0.2 法律合規**

  - 系統需遵守當地法律法規，例如版權法和電子商務相關規定。
  - 確保比賽數據不侵犯第三方智慧財產權。

---

## 2. 技術需求

- **NFR-7.0.0 技術棧**

  - 使用 Next.js 框架進行前後端開發，確保伺服器端渲染（SSR）和靜態網站生成（SSG）的優勢。
  - 使用 Serwist 製作漸進式網頁應用（PWA），提供離線訪問和快速載入體驗。

- **NFR-7.0.1 部署環境**

  - 系統部署在 Vercel 平台，支援自動部署、預覽和全球 CDN 加速。
  - 未來將進行容器化（Docker）以支援多環境部署和擴展。

- **NFR-7.0.2 API 設計**

  - 所有 API 需遵循 RESTful 原則，並提供 OpenAPI 規格文件。
  - API 響應時間不得超過 500 毫秒。
  - 所有 API 請求需使用 JSON 格式，並支援 CORS。
